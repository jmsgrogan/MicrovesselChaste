<!DOCTYPE html>
<html>
  <head>

    <title>Scala 2.12.0-M4 is now available! | Microvessel Chaste</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

      <!--<link rel="icon" type="image/png" href="https://jmsgrogan.github.io/MicrovesselChaste/resources/favicon.ico">-->
      <!--<link rel="shortcut icon" type="image/png" href="https://jmsgrogan.github.io/MicrovesselChaste/resources/favicon.ico">-->

    <!-- prettify CSS (corresponding js at footer)-->
    <link rel="stylesheet" href="https://jmsgrogan.github.io/MicrovesselChaste/resources/css/prettify.css" type="text/css" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://jmsgrogan.github.io/MicrovesselChaste/resources/css/bootstrap.css" type="text/css" />

    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,900,400italic,700italic' rel='stylesheet' type='text/css'>

    <!-- Custom stylesheet -->
    <link rel="stylesheet" href="https://jmsgrogan.github.io/MicrovesselChaste/resources/css/main.css" type="text/css" />

    <!-- Typekit (should stay at top of page, do not move to footer)-->
    <script type="text/javascript" src="//use.typekit.net/abh3wgk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

    <!-- Atom feeds -->
    <link rel="alternate" type="application/atom+xml" title="News Feed" href="https://jmsgrogan.github.io/MicrovesselChaste/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="Blog Feed" href="https://jmsgrogan.github.io/MicrovesselChaste/feed/blog.xml" />


  </head>
  <body>


<div class="darkstrip"></div>

<div class="darkbluetopbar">
  <div class="container" style="height: 100%">
    <div class="navbar-wrap">
      <div class="container" style="position: relative; height: 100%;">
        <div class="scala-logo">
          <a href="https://jmsgrogan.github.io/MicrovesselChaste/index.html"><img src="https://jmsgrogan.github.io/MicrovesselChaste/resources/img/mvc_logo_25.png" alt="Microvessel Chaste Logo" />
        </div>
        <ul class="nav">
  <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/documentation/">Documentation</a></li>
  <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/documentation/installation.html">Download</a></li>
  <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/community/">Community</a></li>
  <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/contribute/">Contribute</a></li>
  <li id="source-code" >
    <a href="https://github.com/jmsgrogan/MicrovesselChaste"><img src="https://jmsgrogan.github.io/MicrovesselChaste/resources/img/github-logo.png" alt="GitHub Logo" /></a>
    <div class="toptip">Source Code</div>
  </li>
  <li id="scala-lang-twitter">
    <a href="https://twitter.com/chaste_project"><img src="https://jmsgrogan.github.io/MicrovesselChaste/resources/img/twitter-logo-white.png" alt="Twitter Logo" /></a>
    <div class="toptip">Chaste on Twitter</div>
  </li>
</ul>

      </div>
    </div>
  </div>
</div>

<div class="midbluebar">
  <div class="container">
    <h1 id="page-title">Scala 2.12.0-M4 is now available!</h1>
  </div>
</div>

<div class="page-container">
  <div class="container" style="min-height: 540px;">
    <!-- <div class="row"> -->
      <!-- <div class="span12"> -->
          <div class="main-page-column">
            
            <div class="article-date">April 11, 2016</div>

<p>We are happy to announce the availability of Scala 2.12.0-M4, which marks feature completeness for 2.12!</p>

<p>Scala 2.12 is all about making optimal use of Java 8&#39;s new features. Traits (<a href="https://github.com/scala/scala/pull/5003">#5003</a>) and functions are compiled to their Java 8 equivalents, and we treat Single Abstract Method types and Scala&#39;s builtin function types uniformly from type checking to the back end (<a href="https://github.com/scala/scala/pull/4971">#4971</a>). We also use <code>invokedynamic</code> for a more natural encoding of other language features (<a href="https://github.com/scala/scala/pull/4896">#4896</a>). We&#39;ve standardized on the GenBCode back end (<a href="https://github.com/scala/scala/pull/4814">#4814</a>, <a href="https://github.com/scala/scala/pull/4838">#4838</a>) and the flat classpath implementation is now the default (<a href="https://github.com/scala/scala/pull/5057">#5057</a>). The optimizer has been completely overhauled for 2.12. This milestone adds box/unbox optimization (<a href="https://github.com/scala/scala/pull/4858">#4858</a>).</p>

<p>For more details about what&#39;s new in this milestone, including some breaking changes, please take a look at <a href="https://github.com/scala/scala/pulls?q=is%3Apr+label%3Arelease-notes+milestone%3A2.12.0-M4+is%3Amerged">these 14 noteworthy PRs</a>.</p>

<p>In total, we merged <a href="https://github.com/scala/scala/pulls?q=is%3Apr+is%3Amerged+milestone%3A2.12.0-M4">135 pull requests</a>, of which <a href="https://github.com/scala/scala/pulls?q=is%3Apr+milestone%3A2.12.0-M4+label%3Awelcome">16 are by new contributors</a> -- welcome! This milestone resolves <a href="https://issues.scala-lang.org/issues/?jql=project%20%3D%20SI%20AND%20status%20%3D%20CLOSED%20AND%20resolution%20%3D%20Fixed%20AND%20fixVersion%20%3D%20%22Scala%202.12.0-M4%22%20ORDER%20BY%20component%20ASC%2C%20priority%20DESC">49 JIRA tickets</a>.</p>

<p>We&#39;d especially like to thank Felix Mulder for his <a href="https://github.com/scala/scala/pulls?utf8=%E2%9C%93&amp;q=is%3Apr+is%3Amerged+author%3Afelixmulder++milestone%3A2.12.0-M4">excellent work on the new Scaladoc interface</a>! <a href="http://www.scala-lang.org/files/archive/api/2.12.0-M4/">Check it out!</a></p>

<p>Except for the breaking changes listed below, code that compiles on 2.11.x without deprecation warnings should compile on 2.12.x too, unless you use experimental APIs such as reflection.  If you find incompatibilities, please <a href="https://issues.scala-lang.org">file an issue</a>.</p>

<p>As usual for milestones, 2.12.0-M4 is not binary compatible with any other Scala release, including other 2.12 milestones. Scala 2.12 requires a Java 8 runtime.</p>

<h3>New features</h3>

<p>With M4, we consider 2.12.x feature complete. Please try it out while we still have time to fix any regressions in M5! For the next milestone, we&#39;ll focus on addressing any issues discovered with M4, overall robustness and polish, and some smaller improvements that are less likely to cause regressions or source incompatibilities. For RC1, we will try to remain binary compatible with M5, and we won&#39;t risk regressions except for the most critical bugs.</p>

<h4>Trait compiles to an interface</h4>

<p>With Java 8 allowing concrete methods in interfaces, Scala 2.12 is able to compile a trait to a single interface. Before, a trait was represented as a class that held the method implementations and an interface. Note that the compiler still has quite a bit of magic to perform behind the scenes, so that care must be taken if a trait is meant to be implemented in Java. (Briefly, if a trait does any of the following its subclasses require synthetic code: defining fields, calling super, initializer statements in the body, extending a class, relying on linearization to find implementations in the right super trait.)</p>

<h4>Java 8-style lambdas</h4>

<p>Scala 2.12 emits closures in the same style as Java 8, whether they target a FunctionN class from the standard library or a user-defined Single Abstract Method type. The type checker accepts a function literal as a valid expression for either kind of &quot;function-like&quot; type (built-in or SAM). This improves the experience of using libraries written for Java 8 in Scala.</p>

<p>For each lambda the compiler generates a method containing the lambda body, and emits an <code>invokedynamic</code> that will spin up a lightweight class for this closure using the JDK&#39;s <code>LambdaMetaFactory</code>.</p>

<p>Compared to Scala 2.11, the new scheme has the advantage that, in most cases, the compiler does not need to generate an anonymous class for each closure. This leads to significantly smaller JAR files.</p>

<h4>New back end</h4>

<p>Scala 2.12 standardizes on the &quot;GenBCode&quot; back end, which emits code more quickly because it directly generates ASM bytecode from Scala compiler trees, while the previous back end used an intermediate representation called &quot;ICode&quot;. The old back ends (GenASM and GenIcode) have been removed (<a href="https://github.com/scala/scala/pull/4814">#4814</a>, <a href="https://github.com/scala/scala/pull/4838">#4838</a>).</p>

<h4>New bytecode optimizer</h4>

<p>The GenBCode back end includes a new inliner and bytecode optimizer.
The optimizer is enabled using the <code>-Yopt:l:classpath</code> compiler option.
Check <code>-Yopt:help</code> to see the full list of available options for the optimizer.</p>

<p>As of M4, the following optimizations are available:</p>

<ul>
<li>Inlining final methods, including methods defined in objects and final methods defined in traits</li>
<li>If a closure is allocated and invoked within the same method, the closure invocation is replaced by an invocations of the corresponding lambda body method</li>
<li>Dead code elimination and a small number of cleanup optimizations</li>
<li>Box/unbox elimination <a href="https://github.com/scala/scala/pull/4858">#4858</a></li>
</ul>

<p>The work on the new optimizer is still ongoing.  You can track it in the <a href="https://github.com/scala/scala-dev/labels/t%3Aoptimizer">scala-dev repository issue tracker</a>.</p>

<h3>Breaking changes</h3>

<h4>SAM types</h4>

<p>As of <a href="https://github.com/scala/scala/pull/4971">#4971</a>, we treat Single Abstract Method types in the same way as our built-in FunctionN classes. This means overloading resolution has more contenders to choose from, making type inference less effective. Here&#39;s an example:</p>
<div class="highlight"><pre><code class="language-" data-lang="">class C[V] {
  def sort(cmp: java.util.Comparator[V]): C[V] = ???
  def sort(cmp: (V, V) =&gt; Int): C[V] = sort(
    new java.util.Comparator[V] {
      def compare(a: V, b: V): Int = cmp(a, b)
    })
}

(new C[Int]) sort (_ - _) // error
(new C[Int]) sort ((_ - _): java.util.Comparator[Int]) // ok
(new C[Int]) sort ((a: Int, b: Int) =&gt; a - b)  // ok
</code></pre></div>
<p>The first attempt fails because the type checker cannot infer the types for <code>_ - _</code>&#39;s arguments anymore.
Type inference in this scenario only works when we can narrow the overloads down to one before type checking the arguments the methods are applied to. When a function is passed as an argument to an overloaded method, we do this by considering the &quot;shape&quot; of the function (essentially, its arity). Now that <code>Comparator[?]</code> and <code>(?, ?) =&gt; ?</code> are both considered functions of arity two, our clever scheme breaks down and the programmer must either select an overload (second application) or make the argument types explicit (last application, which resolves to the <code>Function2</code> overload).</p>

<p>Finally, implicit conversion of SAM types to Function types won&#39;t kick in anymore, since the compiler does this conversion itself first:</p>
<div class="highlight"><pre><code class="language-" data-lang="">trait MySam { def apply(x: Int): String }

implicit def unused(fun: Int =&gt; String): MySam
  = new MySam { def apply(x: Int) = fun(x) }

// uses sam conversion, not the `unused` implicit
val sammy: MySam = _.toString
</code></pre></div>
<h4>Changed syntax trees (affects macro and compiler plugin authors)</h4>

<p>PR <a href="https://github.com/scala/scala/pull/4749">#4794</a> changed the syntax trees for selections of statically accessible symbols. For example, a selection of <code>Predef</code> no longer has the shape <code>q&quot;scala.this.Predef&quot;</code> but simply <code>q&quot;scala.Predef&quot;</code>. Macros and compiler plugins matching on the old tree shape need to be adjusted.</p>

<h2>Binary compatibility</h2>

<p>Since Scala 2.11, minor releases of Scala are binary compatible with each other.
Scala 2.12 will continue this tradition: every 2.12.x release will be binary compatible with 2.12.0.
Milestone releases and release candidates, however, are <strong>not</strong> binary compatible with any other release.</p>

<p>Scala 2.12 is not and will not be binary compatible with the 2.11.x series.  This allows us to keep improving the Scala compiler and standard library.  We are working with the community to ensure that core projects in the Scala eco-system become available for 2.12.  Please refer to this growing <a href="https://github.com/scala/make-release-notes/blob/2.12.x/projects-2.12.md">list of libraries and frameworks</a>.</p>

<p>The <a href="http://scala-lang.org/news/2.11.1">Scala 2.11.1 release notes</a> explain in more detail on how binary compatibility works in Scala.  The same policies apply to 2.12 as well.</p>

<h2>Contributors</h2>

<p>A big thank you to everyone who&#39;s helped improve Scala by reporting bugs, improving our documentation, spreading kindness in mailing lists and other public fora, and submitting and reviewing pull requests! You are all magnificent.</p>

<p>According to <code>git shortlog -sn --no-merges v2.12.0-M3..v2.12.0-M4</code>, the following contributors helped to realize this milestone: Lukas Rytz, Adriaan Moors, Jason Zaugg, Stefan Zeiger, Janek Bogucki, Seth Tisue, Felix Mulder, A. P. Marki, Simon Ochsenreither, Performant Data LLC, wpopielarski, Kota Mizushima, Rui Gonçalves, Shane Delmore, dk14, Rex Kerr, martijnhoekstra, Kenji Yoshida, vsalvis, todesking, triggerNZ, Linas Medziunas, Dongjoon Hyun, Denys Shabalin, Pim Verkerk, Rebecca Claire Murphy, Alan Johnson, David Hoepelman, Shadow53, Casey Leask, Arnout Engelen, Sébastien Doeraene, Valerian, Viktor Klang, jvican, mathhun, peterz, Eitan Adler, Frank S. Thomas, Dmitry Petrashko, JoeRatt, Kato Kazuyoshi, Dmitry Melnichenko, Marc Prud&#39;hommeaux, Mark Mynsted, Marko Elezovic, Markus Hauck, Michał Pociecha. Thank you!</p>

<h2>Release notes</h2>

<p>Improvements to these release notes <a href="https://github.com/scala/make-release-notes/blob/2.12.x/hand-written.md">are welcome!</a></p>

<h2>Obtaining Scala</h2>

<ul>
<li>Download a distribution from <a href="http://scala-lang.org/download/2.12.0-M4.html">scala-lang.org</a></li>
<li>Bump the <code>scalaVersion</code> setting in your SBT-based project</li>
<li>Obtain JARs via <a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org.scala-lang%22%20AND%20v%3A%222.12.0-M4%22">Maven Central</a></li>
</ul>


          </div>
          <div class="sidebar">
            <div class="sidebar-inner">
              <div class="contents">Contents</div>
              <div id="toc"></div>
              <br/>
              <div class="alert-info">
                <a href="/contribute/documentation.html#updating_scalalangorg"><p><strong>Problem with this page?</strong>
                Please help us fix it!</p></a>
              </div>
            </div>
          </div>
          <div style="clear:both"></div>
      <!-- </div> -->
    <!-- </div> -->
  </div>
</div>


  <div class="footer">
  <div class="container">
    <ul>
      <li><h5>Documentation</h5></li>
      <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/documentation/getting-started.html">Getting Started</a></li>
      <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/documentation/python-api/index.html">Python API</a></li>
      <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/documentation/cpp-api/index.html">C++ API</a></li>
      <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/documentation/tutorials.html">Tutorials</a></li>
    </ul>
    <ul>
      <li><h5>Download</h5></li>
        <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/documentation/installation.html">Instructions</a></li>
    </ul>
    <ul>
      <li><h5>Community</h5></li>
      <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/community/">Community</a></li>
      <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/community/index.html#mailing-lists">Mailing Lists</a></li>
    </ul>
    <ul>
      <li><h5>Contribute</h5></li>
      <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/contribute">How to Help</a></li>
      <li><a href="https://jmsgrogan.github.io/MicrovesselChaste/contribute/">Report an Issue</a></li>
    </ul>
    </div>
    <div class="container">
      <div class="copyright">
        <p style="float: left;"><br/>Copyright &copy; 2015-<span class="current-year"></span> University of Oxford<br/> Oxford, United Kingdom. Released under <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a>.<br />
Source code for this website was modified from the <a href="https://www.scala-lang.org/">scala website</a> on <a href="https://www.scala-lang.org/">github</a>. <br />
See <a href="https://raw.github.com/scala/scala-lang/master/license.md">original license</a> for details. </p>
      </div>
      <div class="scala-logo-footer">
        <img src="https://jmsgrogan.github.io/MicrovesselChaste/resources/img/mvc_logo_25.png" alt="Microvessel Chaste Logo" />
      </div>
    </div> <!-- container -->
    </div> <!-- footer -->

    <!-- prettify  js -->
    <script src="https://jmsgrogan.github.io/MicrovesselChaste/resources/js/vendor/prettify/prettify.js" type="text/javascript" ></script>
    <script src="https://jmsgrogan.github.io/MicrovesselChaste/resources/js/vendor/prettify/lang-scala.js" type="text/javascript" ></script>

    <!-- jquery js -->
    <script src="https://jmsgrogan.github.io/MicrovesselChaste/resources/js/vendor/jquery-1.8.3.min.js" type="text/javascript" ></script>
    <script src="https://jmsgrogan.github.io/MicrovesselChaste/resources/js/vendor/jquery.stellar.min.js" type="text/javascript" ></script>
    <script src="https://jmsgrogan.github.io/MicrovesselChaste/resources/js/vendor/tweetMachine.min.js" type="text/javascript" ></script>

    <!-- modernizr js -->
    <script src="https://jmsgrogan.github.io/MicrovesselChaste/resources/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js" type="text/javascript" ></script>

    <!-- retina js -->
    <script src="https://jmsgrogan.github.io/MicrovesselChaste/resources/js/vendor/retina.js" type="text/javascript" ></script>

    <!-- backstretch js -->
    <script src="https://jmsgrogan.github.io/MicrovesselChaste/resources/js/vendor/jquery.backstretch.min.js" type="text/javascript" ></script>

    <!-- Bootstrap JS -->
    <script src="https://jmsgrogan.github.io/MicrovesselChaste/resources/js/vendor/bootstrap.min.js" type="text/javascript" ></script>

    
    <!-- table of contents JS -->
    <script src="https://jmsgrogan.github.io/MicrovesselChaste/resources/js/vendor/toc.js" type="text/javascript" ></script>
    <script type="text/javascript">
      $(document).ready(function(){
        $('#toc').toc({exclude: 'h1, h5, h6', context: '', autoId: true, numerate: false});
        function moveScroller() {
          if ($(".sidebar").length == 0)
            return;
          var a = function() {
            var topOfScroll = $(window).scrollTop();
            var topOfSidebar = $(".sidebar").offset().top;
            var sidebarInner = $(".sidebar-inner");
            var bottomOfSidebarInner = $(".sidebar-inner").offset().top + $(".sidebar-inner").outerHeight();
            var topOfFooter = $(".footer").offset().top - 10;
            var footerHeight = $(".footer").outerHeight();
            if (topOfScroll > topOfSidebar) {
              if (bottomOfSidebarInner > topOfFooter) {
                sidebarInner.css({position:"fixed",bottom:footerHeight,top:""});
              } else {
                sidebarInner.css({position:"fixed",top:"10px",bottom:""});
              }
            } else {
              sidebarInner.css({position:"relative",top:""});
            }
          };
          $(window).scroll(a);a()
        }
        moveScroller();
      })
    </script>
    

    <!-- Custom javascript -->
    <script src="https://jmsgrogan.github.io/MicrovesselChaste/resources/js/main.js" type="text/javascript"></script>
  </body>
</html>

